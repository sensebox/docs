---
sidebar_position: 1
title: OLED Display
hide_title: false
description: senseBox OLED Display
---

import ImageWithText from '@site/src/components/ImageWithText/ImageWithText'
import display from '@site/static/img/hardware-bilder/oled/display.png'
import TutorialPorts from '@site/src/components/TutorialPorts/TutorialPorts'
import { useBoardStore } from '@site/src/lib/stores/store'

# OLED Display

Mit dem senseBox OLED Display lassen sich auf 128x64 Pixeln Messwerte, Statusmeldungen und vieles mehr anzeigen.

<ImageWithText src={display} alt="OLED Display" title="OLED Display" />

## Technische Informationen

- "Plug-in-and-Go" senseBox kompatibel durch Breakout-Board mit JST-Anschluss
- Maße: 24mm x 25mm x 19mm
- Auflösung von 128x64 Pixeln
- Panel Größe: 26,70x19,26x1,45 (mm)

## Anschluss

<TutorialPorts port="i2c" />

## Programmierung (Arduino)

### Software Bibliothek

Um den Sensor in Arduino zu Programmieren musst du die Software Bibliothek [Adafruit GFX Library](https://www.arduino.cc/reference/en/libraries/adafruit-gfx-library/) **sowie** [Adafruit SSD1306](https://www.arduino.cc/reference/en/libraries/adafruit-ssd1306/) installieren.

### Code

Dieser Sketch lässt auf dem Display "Hallo Welt!" anzeigen.

```cpp
#include <SPI.h>
#include <Wire.h>
#include <Adafruit_GFX.h> // http://librarymanager/All#Adafruit_GFX_Library
#include <Adafruit_SSD1306.h> // http://librarymanager/All#Adafruit_SSD1306


#define SCREEN_WIDTH 128
#define SCREEN_HEIGHT 64
#define OLED_RESET -1

Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &Wire, OLED_RESET);

void setup() {
    display.begin(SSD1306_SWITCHCAPVCC, 0x3D);
    display.display();
    delay(100);
    display.clearDisplay();
}


void loop() {
    display.setCursor(0,0);
    display.setTextSize(1);
    display.setTextColor(WHITE,BLACK);
    display.println("Hallo Welt!");
    display.display();
}
```

## Programmierung (Blockly)

Um Informationen auf dem Display anzeigen zu lassen, muss dieses zuerst im `Setup()` initalisiert werden. Anschließend können in der `Endlosschleife()` die `Zeige auf dem Display`-Schleife und der `Display löschen`-Block platziert werden. Im freien Abschnitt des `Zeige auf Display`-Blocks kann dann anschließend festgelegt werden, was genau angezeigt werden soll. Der `Display löschen`-Block muss hinzugefügt werden, damit verschiedene Informationen nicht übereinander geschrieben werden.

![Text/Zahl anzeigen](/img/blockly-bilder/display/blockly-display-1.svg)

### Text/Zahl anzeigen

Um Text oder eine Zahl anzeigen zu lassen, ziehe den `Schreibe Text/Zahl`-Block in den freien Abschnitt des `Zeige auf Display`-Blocks.

![Text/Zahl anzeigen](/img/blockly-bilder/display/blockly-display-2.svg)

Der `Schreibe Text/Zahl`-Block verfügt über fünf Einstellungsmöglichkeiten:

- **Schriftfarbe:** Hier kannst du wählen ob du mit weißer Schrift auf schwarzem Grund, oder mit schwarzer Schrift auf weißem Grund schreiben möchtest.
- **Schriftgröße:** Hier kannst du einstellen, in welcher Größe dein Text, bzw. deine Zahl angezeigt werden soll. In Schriftgröße 1 ist ein Zeichen 8 Pixel hoch, in Schriftgröße 2 bereits 16 Pixel.
- **x-Koordinate:** Hier legst du fest, an welcher x-Koordinate (siehe Abb. oben) du beginnen möchtest zu schreiben.
- **y-Koordinate:** Hier legst du fest, an welcher y-Koordinate (siehe Abb. oben) du beginnen möchtest zu schreiben.
- **Wert:** An diesen freien Blockabschnitt kann der jeweilige Text, die Zahl oder der Messwert angefügt werden.

![Text/Zahl anzeigen](/img/blockly-bilder/display/blockly-display-3.svg)

{useBoardStore((state) => (state.board === 'MCU-S2' || state.board === ':edu S2') && (
<>
<h2>Programmierung (CircuitPython)</h2>

<p>Um das Display mit CircuitPython zu programmieren, muss die senseBox MCU-S2 zunächst mit CircuitPython geflasht werden. Eine Anleitung dazu findest du <a href="https://docs.sensebox.de/docs/misc/circuitpython_esp32">hier</a>.</p>

<h3>Software Bibliothek</h3>

<p>Lade dir die <a href="https://github.com/adafruit/Adafruit_CircuitPython_DisplayIO_SSD1306/releases/download/3.0.3/adafruit-circuitpython-displayio-ssd1306-10.x-mpy-3.0.3.zip">SSD1306 CircuitPython Bibliothek</a> <b>und</b> die <a href="https://github.com/adafruit/Adafruit_CircuitPython_Display_Text/releases/download/3.3.3/adafruit-circuitpython-display-text-10.x-mpy-3.3.3.zip ">adafruit_display_text Bibliothek</a> herunter. Entpacke die .zip Dateien und kopiere die <code>.mpy</code> Dateien aus den <code>lib</code> Ordnern in den <code>lib</code> Ordner deiner senseBox (<code>CIRCUITPY</code> Laufwerk).</p>

<h3>Code</h3>

<p>Mit dem CircuitPython Editor deiner Wahl kannst du nun das Display programmieren und Inhalte anzeigen lassen. Dieser Code zeigt "Hello senseBox!" auf dem Display an:</p>

<pre><code className="language-python">{`
import board
import displayio
import digitalio
import terminalio
from adafruit_display_text import label
import adafruit_displayio_ssd1306

# IO Enable
io_enable_pin = digitalio.DigitalInOut(board.IO_POWER)
io_enable_pin.direction = digitalio.Direction.OUTPUT
io_enable_pin.value = False

displayio.release_displays()

#oled_reset = board.D9

# Use for I2C
i2c = board.I2C()  # uses board.SCL and board.SDA
# i2c = board.STEMMA_I2C()  # For using the built-in STEMMA QT connector on a microcontroller
display_bus = displayio.I2CDisplay(i2c, device_address=0x3D)

# Use for SPI
# spi = board.SPI()
# oled_cs = board.D5
# oled_dc = board.D6
# display_bus = displayio.FourWire(spi, command=oled_dc, chip_select=oled_cs,
#                                 reset=oled_reset, baudrate=1000000)

WIDTH = 128
HEIGHT = 64  # Change to 64 if needed
BORDER = 5

display = adafruit_displayio_ssd1306.SSD1306(display_bus, width=WIDTH, height=HEIGHT)

# Make the display context
splash = displayio.Group()
display.root_group = splash

color_bitmap = displayio.Bitmap(WIDTH, HEIGHT, 1)
color_palette = displayio.Palette(1)
color_palette[0] = 0xFFFFFF  # White

bg_sprite = displayio.TileGrid(color_bitmap, pixel_shader=color_palette, x=0, y=0)
splash.append(bg_sprite)

# Draw a smaller inner rectangle
inner_bitmap = displayio.Bitmap(WIDTH - BORDER * 2, HEIGHT - BORDER * 2, 1)
inner_palette = displayio.Palette(1)
inner_palette[0] = 0x000000  # Black
inner_sprite = displayio.TileGrid(
    inner_bitmap, pixel_shader=inner_palette, x=BORDER, y=BORDER
)
splash.append(inner_sprite)

# Draw a label
text = "Hello senseBox!"
text_area = label.Label(
    terminalio.FONT, text=text, color=0xFFFFFF, x=28, y=HEIGHT // 2 - 1
)
splash.append(text_area)

while True:
    pass`}</code></pre>
</>
))}

## Projekte

- #### [IoT Messstation](https://sensebox.de/projects/de/2024-01-10-iotmesstation_s2)
